<!DOCTYPE html>
<html>
<head>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { 
  font-family: 'Inter', -apple-system, sans-serif; 
  background: linear-gradient(145deg, #1e2a4a 0%, #1a2342 50%, #162035 100%); 
  background-attachment: fixed;
  color: #e8e8f0; 
  padding: 50px; 
  line-height: 1.8;
  max-width: 1300px;
  margin: 0 auto;
  font-size: 18px;
}
h1 { font-size: 3rem; margin-bottom: 12px; color: #fff; }
h2 { 
  font-size: 2rem; 
  margin: 90px 0 30px; 
  color: #fff; 
  border-bottom: 2px solid #3a4a6a; 
  padding-bottom: 15px;
}
h3 { font-size: 1.4rem; margin: 35px 0 18px; color: #a0a8b8; }
p { margin: 18px 0; color: #b8c0d0; font-size: 1.1rem; }
.subtitle { color: #7080a0; margin-bottom: 60px; font-size: 1.2rem; }
code { 
  background: #252a48; 
  padding: 4px 12px; 
  border-radius: 6px; 
  font-family: 'SF Mono', 'Consolas', monospace;
  font-size: 1rem;
  color: #4ecdc4;
}

.diagram { 
  background: rgba(25, 32, 58, 0.9); 
  border-radius: 20px; 
  padding: 40px; 
  margin: 35px 0;
  border: 1px solid #3a4a6a;
}
.diagram-label {
  font-size: 0.95rem;
  color: #7080a0;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 30px;
}
.diagram-caption {
  font-size: 1rem;
  color: #8898b8;
  margin-top: 25px;
  padding-top: 20px;
  border-top: 1px solid #3a4a6a;
}

:root {
  --red: #ff6b6b;
  --blue: #4dabf7;
  --green: #51cf66;
  --purple: #cc5de8;
  --orange: #ff922b;
  --cyan: #22d3ee;
  --yellow: #fcc419;
  --pink: #f06595;
}

.flex { display: flex; }
.flex-col { flex-direction: column; }
.gap-10 { gap: 12px; }
.gap-20 { gap: 24px; }
.gap-30 { gap: 36px; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.flex-1 { flex: 1; }

.box {
  padding: 18px 24px;
  border-radius: 10px;
  font-size: 1rem;
  font-weight: 500;
}
.box-red { background: rgba(255,107,107,0.15); border: 1px solid var(--red); color: var(--red); }
.box-blue { background: rgba(77,171,247,0.15); border: 1px solid var(--blue); color: var(--blue); }
.box-green { background: rgba(81,207,102,0.15); border: 1px solid var(--green); color: var(--green); }
.box-purple { background: rgba(204,93,232,0.15); border: 1px solid var(--purple); color: var(--purple); }
.box-orange { background: rgba(255,146,43,0.15); border: 1px solid var(--orange); color: var(--orange); }
.box-cyan { background: rgba(34,211,238,0.15); border: 1px solid var(--cyan); color: var(--cyan); }
.box-gray { background: rgba(255,255,255,0.08); border: 1px solid #4a5a7a; color: #b0b8c8; }

.arrow-down {
  width: 3px;
  height: 35px;
  background: #4a5a7a;
  margin: 0 auto;
  position: relative;
}
.arrow-down::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: -5px;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 10px solid #4a5a7a;
}

.mem-bar {
  display: flex;
  height: 55px;
  border-radius: 8px;
  overflow: hidden;
}
.mem-bar > div {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.95rem;
  font-weight: 600;
  color: #fff;
}

.bar-chart { display: flex; flex-direction: column; gap: 16px; }
.bar-row { display: flex; align-items: center; gap: 20px; }
.bar-label { width: 180px; font-size: 1rem; color: #a0a8b8; text-align: right; }
.bar-container { flex: 1; height: 38px; background: #1a2245; border-radius: 6px; overflow: hidden; }
.bar-fill { height: 100%; display: flex; align-items: center; padding-left: 15px; font-size: 1rem; font-weight: 600; color: #fff; }

table { width: 100%; border-collapse: collapse; margin: 25px 0; font-size: 1rem; }
th, td { padding: 16px 20px; text-align: left; border-bottom: 1px solid #3a4a6a; }
th { color: #8898b8; font-weight: 500; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; }
td { color: #c8d0e0; }
.mono { font-family: 'SF Mono', monospace; color: var(--cyan); }

.equation {
  background: #1a2245;
  padding: 28px 38px;
  border-radius: 12px;
  font-family: 'SF Mono', monospace;
  font-size: 1.1rem;
  color: #d0d8e8;
  overflow-x: auto;
  line-height: 2.2;
}

.stat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; }
.stat-card {
  background: #1a2245;
  padding: 30px;
  border-radius: 14px;
  text-align: center;
}
.stat-value { font-size: 2.5rem; font-weight: 700; color: var(--cyan); }
.stat-label { font-size: 1rem; color: #8898b8; margin-top: 10px; text-transform: uppercase; letter-spacing: 1px; }

.compare { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
@media (max-width: 700px) { .compare { grid-template-columns: 1fr; } }
.compare-side { padding: 32px; border-radius: 16px; }
.compare-title { font-size: 1.2rem; font-weight: 600; margin-bottom: 20px; }

.info-box {
  padding: 25px;
  background: #1a2245;
  border-radius: 14px;
}
</style>
</head>
<body>

<h1>Technical Appendix</h1>
<p class="subtitle">KV-Cache Offloading for LLM Inference â€” Visual Reference</p>

<!-- ============================================ -->
<h2>1. Transformer Architecture</h2>
<p>Llama-70B consists of 80 identical layers. Each layer performs attention followed by a feed-forward transformation.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 1.1 â€” Layer Structure</div>
  
  <div class="flex gap-30 items-center" style="justify-content: center; flex-wrap: wrap;">
    <div class="flex-col gap-10" style="width: 220px;">
      <div class="box box-gray" style="text-align:center;">Input Embedding</div>
      <div class="arrow-down"></div>
      
      <div style="border: 2px solid #4a5a7a; border-radius: 14px; padding: 18px;">
        <div style="font-size:0.9rem; color:#7080a0; margin-bottom:12px;">Ã— 80 LAYERS</div>
        <div class="box box-blue" style="text-align:center; margin-bottom:10px;">Self-Attention</div>
        <div class="box box-purple" style="text-align:center;">Feed-Forward</div>
      </div>
      
      <div class="arrow-down"></div>
      <div class="box box-gray" style="text-align:center;">Output Logits</div>
    </div>
    
    <div class="info-box" style="width: 320px;">
      <div style="font-size:1rem; color:#8898b8; margin-bottom:18px;">Architecture Parameters</div>
      <table style="margin:0;">
        <tr><td>Layers</td><td class="mono">80</td></tr>
        <tr><td>Hidden dim</td><td class="mono">8,192</td></tr>
        <tr><td>Query heads</td><td class="mono">64</td></tr>
        <tr><td>KV heads</td><td class="mono">8</td></tr>
        <tr><td>Head dim</td><td class="mono">128</td></tr>
        <tr><td>FFN dim</td><td class="mono">28,672</td></tr>
        <tr style="border:none;"><td>Parameters</td><td class="mono">70B</td></tr>
      </table>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>2. Attention Mechanism</h2>
<p>Each token computes Query, Key, and Value vectors. Attention scores determine how much each previous token contributes to the output.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 2.1 â€” Q, K, V Projections</div>
  
  <div class="flex gap-30 items-center" style="justify-content:center; flex-wrap: wrap;">
    <div class="flex-col items-center gap-10">
      <div class="box box-gray" style="width:140px; text-align:center;">
        Input x<br><span style="font-size:0.9rem; color:#7080a0;">8,192 dims</span>
      </div>
      <div style="display:flex; gap:10px;">
        <div class="arrow-down"></div>
        <div class="arrow-down"></div>
        <div class="arrow-down"></div>
      </div>
      <div style="display:flex; gap:10px;">
        <div class="box box-red" style="width:85px; text-align:center; font-size:0.95rem;">
          W_Q<br><span style="opacity:0.8;">Query</span>
        </div>
        <div class="box box-green" style="width:85px; text-align:center; font-size:0.95rem;">
          W_K<br><span style="opacity:0.8;">Key</span>
        </div>
        <div class="box box-blue" style="width:85px; text-align:center; font-size:0.95rem;">
          W_V<br><span style="opacity:0.8;">Value</span>
        </div>
      </div>
      <div style="display:flex; gap:10px;">
        <div class="arrow-down"></div>
        <div class="arrow-down"></div>
        <div class="arrow-down"></div>
      </div>
      <div style="display:flex; gap:10px;">
        <div style="width:85px; text-align:center; padding:12px; background:rgba(255,107,107,0.2); border-radius:8px; font-size:0.9rem; color:var(--red);">
          Q<br>128d
        </div>
        <div style="width:85px; text-align:center; padding:12px; background:rgba(81,207,102,0.2); border-radius:8px; font-size:0.9rem; color:var(--green);">
          K<br>128d
        </div>
        <div style="width:85px; text-align:center; padding:12px; background:rgba(77,171,247,0.2); border-radius:8px; font-size:0.9rem; color:var(--blue);">
          V<br>128d
        </div>
      </div>
    </div>
    
    <div class="info-box" style="max-width:320px;">
      <div style="font-size:1rem; color:#8898b8; margin-bottom:15px;">What each vector represents:</div>
      <div style="font-size:1.05rem; color:var(--red); margin:12px 0;">Q â€” "What am I looking for?"</div>
      <div style="font-size:1.05rem; color:var(--green); margin:12px 0;">K â€” "What do I contain?"</div>
      <div style="font-size:1.05rem; color:var(--blue); margin:12px 0;">V â€” "What do I contribute?"</div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 2.2 â€” Attention Score Computation</div>
  
  <div class="flex gap-30" style="justify-content:center; flex-wrap:wrap;">
    <div class="flex-col gap-20">
      <div style="font-size:1rem; color:#a0a8b8; margin-bottom:10px;">Token "France" attending to previous tokens:</div>
      
      <div class="flex gap-10 items-center">
        <div style="width:100px; font-size:0.95rem; color:#8898b8;">Position 0</div>
        <div style="flex:1; display:flex; align-items:center; gap:12px;">
          <span style="color:var(--red); font-size:1rem;">Q<sub>france</sub></span>
          <span style="color:#5a6a8a;">Â·</span>
          <span style="color:var(--green); font-size:1rem;">K<sub>the</sub></span>
          <span style="color:#5a6a8a;">=</span>
          <div style="width:100px; height:24px; background:#1a2245; border-radius:4px; overflow:hidden;">
            <div style="width:12%; height:100%; background:var(--cyan);"></div>
          </div>
          <span class="mono" style="font-size:0.95rem;">0.12</span>
        </div>
      </div>
      
      <div class="flex gap-10 items-center">
        <div style="width:100px; font-size:0.95rem; color:#8898b8;">Position 1</div>
        <div style="flex:1; display:flex; align-items:center; gap:12px;">
          <span style="color:var(--red); font-size:1rem;">Q<sub>france</sub></span>
          <span style="color:#5a6a8a;">Â·</span>
          <span style="color:var(--green); font-size:1rem;">K<sub>capital</sub></span>
          <span style="color:#5a6a8a;">=</span>
          <div style="width:100px; height:24px; background:#1a2245; border-radius:4px; overflow:hidden;">
            <div style="width:87%; height:100%; background:var(--cyan);"></div>
          </div>
          <span class="mono" style="font-size:0.95rem;">0.87</span>
        </div>
      </div>
      
      <div class="flex gap-10 items-center">
        <div style="width:100px; font-size:0.95rem; color:#8898b8;">Position 2</div>
        <div style="flex:1; display:flex; align-items:center; gap:12px;">
          <span style="color:var(--red); font-size:1rem;">Q<sub>france</sub></span>
          <span style="color:#5a6a8a;">Â·</span>
          <span style="color:var(--green); font-size:1rem;">K<sub>of</sub></span>
          <span style="color:#5a6a8a;">=</span>
          <div style="width:100px; height:24px; background:#1a2245; border-radius:4px; overflow:hidden;">
            <div style="width:23%; height:100%; background:var(--cyan);"></div>
          </div>
          <span class="mono" style="font-size:0.95rem;">0.23</span>
        </div>
      </div>
      
      <div class="flex gap-10 items-center">
        <div style="width:100px; font-size:0.95rem; color:#8898b8;">Position 3</div>
        <div style="flex:1; display:flex; align-items:center; gap:12px;">
          <span style="color:var(--red); font-size:1rem;">Q<sub>france</sub></span>
          <span style="color:#5a6a8a;">Â·</span>
          <span style="color:var(--green); font-size:1rem;">K<sub>france</sub></span>
          <span style="color:#5a6a8a;">=</span>
          <div style="width:100px; height:24px; background:#1a2245; border-radius:4px; overflow:hidden;">
            <div style="width:45%; height:100%; background:var(--cyan);"></div>
          </div>
          <span class="mono" style="font-size:0.95rem;">0.45</span>
        </div>
      </div>
    </div>
    
    <div class="info-box">
      <div style="font-size:1rem; color:#8898b8; margin-bottom:18px;">After softmax normalization:</div>
      <div class="flex gap-10" style="margin-bottom:18px;">
        <div style="text-align:center;">
          <div style="font-size:0.95rem; color:#8898b8;">The</div>
          <div style="width:55px; height:80px; background:#151a35; border-radius:6px; display:flex; align-items:flex-end; justify-content:center; padding-bottom:6px;">
            <div style="width:32px; background:var(--cyan); border-radius:3px; height:6%;"></div>
          </div>
          <div class="mono" style="font-size:0.9rem; margin-top:6px;">6%</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:0.95rem; color:#8898b8;">capital</div>
          <div style="width:55px; height:80px; background:#151a35; border-radius:6px; display:flex; align-items:flex-end; justify-content:center; padding-bottom:6px;">
            <div style="width:32px; background:var(--cyan); border-radius:3px; height:52%;"></div>
          </div>
          <div class="mono" style="font-size:0.9rem; margin-top:6px;">52%</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:0.95rem; color:#8898b8;">of</div>
          <div style="width:55px; height:80px; background:#151a35; border-radius:6px; display:flex; align-items:flex-end; justify-content:center; padding-bottom:6px;">
            <div style="width:32px; background:var(--cyan); border-radius:3px; height:14%;"></div>
          </div>
          <div class="mono" style="font-size:0.9rem; margin-top:6px;">14%</div>
        </div>
        <div style="text-align:center;">
          <div style="font-size:0.95rem; color:#8898b8;">France</div>
          <div style="width:55px; height:80px; background:#151a35; border-radius:6px; display:flex; align-items:flex-end; justify-content:center; padding-bottom:6px;">
            <div style="width:32px; background:var(--cyan); border-radius:3px; height:28%;"></div>
          </div>
          <div class="mono" style="font-size:0.9rem; margin-top:6px;">28%</div>
        </div>
      </div>
      <div style="font-size:1rem; color:#a0a8b8;">Output = weighted sum of V vectors</div>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>3. KV-Cache Structure</h2>
<p>The KV-cache stores Key and Value vectors for all processed tokens, eliminating redundant computation during generation.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 3.1 â€” KV-Cache Organization</div>
  
  <div style="display:grid; grid-template-columns: repeat(8, 1fr); gap:6px; margin-bottom:25px;">
    <div style="grid-column: span 8; text-align:center; font-size:0.9rem; color:#8898b8; padding:10px;">Layer 1</div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h0</sub></div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h1</sub></div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h2</sub></div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h3</sub></div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h4</sub></div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h5</sub></div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h6</sub></div>
    <div style="background:rgba(81,207,102,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--green);">K<sub>h7</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h0</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h1</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h2</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h3</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h4</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h5</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h6</sub></div>
    <div style="background:rgba(77,171,247,0.3); padding:12px; border-radius:6px; text-align:center; font-size:0.85rem; color:var(--blue);">V<sub>h7</sub></div>
  </div>
  
  <div style="text-align:center; color:#6a7a9a; font-size:1rem; margin:20px 0;">â‹® Ã— 80 layers â‹®</div>
  
  <div class="equation" style="margin-top:25px;">
Size = L Ã— H_kv Ã— seq_len Ã— d_head Ã— 2 Ã— bytes
     = 80 Ã— 8 Ã— seq_len Ã— 128 Ã— 2 Ã— 2
     = <span style="color:var(--cyan); font-weight:600;">320 KB per token</span>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 3.2 â€” KV-Cache Size Scaling</div>
  
  <div class="bar-chart">
    <div class="bar-row">
      <div class="bar-label">4K tokens</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:4%; background:var(--blue);">1.3 GB</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">32K tokens</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:12%; background:var(--blue);">10 GB</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">128K tokens</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:45%; background:var(--blue);">41 GB</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">512K tokens</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:85%; background:var(--orange);">164 GB</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">1M tokens</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:100%; background:var(--red);">328 GB</div>
      </div>
    </div>
  </div>
  <div style="text-align:right; font-size:0.95rem; color:#6a7a9a; margin-top:15px;">B200 HBM capacity: 192 GB</div>
</div>

<!-- ============================================ -->
<h2>4. Prefill vs Decode</h2>
<p>The two phases of inference have fundamentally different computational characteristics.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 4.1 â€” Phase Comparison</div>
  
  <div class="compare">
    <div class="compare-side" style="background:rgba(77,171,247,0.1); border:2px solid var(--blue);">
      <div class="compare-title" style="color:var(--blue);">Prefill Phase</div>
      <div style="font-size:1rem; color:#8898b8; margin-bottom:18px;">Processing the prompt</div>
      
      <div style="display:flex; gap:6px; margin-bottom:18px; flex-wrap:wrap;">
        <div style="padding:10px 16px; background:var(--blue); color:#fff; border-radius:6px; font-size:0.95rem;">The</div>
        <div style="padding:10px 16px; background:var(--blue); color:#fff; border-radius:6px; font-size:0.95rem;">capital</div>
        <div style="padding:10px 16px; background:var(--blue); color:#fff; border-radius:6px; font-size:0.95rem;">of</div>
        <div style="padding:10px 16px; background:var(--blue); color:#fff; border-radius:6px; font-size:0.95rem;">France</div>
        <div style="padding:10px 16px; background:var(--blue); color:#fff; border-radius:6px; font-size:0.95rem;">is</div>
      </div>
      
      <div style="font-size:1rem; color:#a0a8b8;">
        <div style="margin:10px 0;">âœ“ All tokens processed in parallel</div>
        <div style="margin:10px 0;">âœ“ High arithmetic intensity</div>
        <div style="margin:10px 0;">âœ“ <strong style="color:var(--blue);">Compute-bound</strong></div>
      </div>
    </div>
    
    <div class="compare-side" style="background:rgba(255,107,107,0.1); border:2px solid var(--red);">
      <div class="compare-title" style="color:var(--red);">Decode Phase</div>
      <div style="font-size:1rem; color:#8898b8; margin-bottom:18px;">Generating response</div>
      
      <div style="display:flex; gap:6px; margin-bottom:18px; align-items:center; flex-wrap:wrap;">
        <div style="padding:10px 16px; background:#3a4a6a; color:#8898b8; border-radius:6px; font-size:0.95rem;">The</div>
        <div style="padding:10px 16px; background:#3a4a6a; color:#8898b8; border-radius:6px; font-size:0.95rem;">capital</div>
        <div style="padding:10px 16px; background:#3a4a6a; color:#8898b8; border-radius:6px; font-size:0.95rem;">...</div>
        <div style="color:#6a7a9a; font-size:1.2rem;">â†’</div>
        <div style="padding:10px 16px; background:var(--red); color:#fff; border-radius:6px; font-size:0.95rem;">Paris</div>
      </div>
      
      <div style="font-size:1rem; color:#a0a8b8;">
        <div style="margin:10px 0;">âœ— One token at a time</div>
        <div style="margin:10px 0;">âœ— Must read entire KV-cache</div>
        <div style="margin:10px 0;">âœ— <strong style="color:var(--red);">Memory-bandwidth-bound</strong></div>
      </div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 4.2 â€” Decode Memory Access Pattern</div>
  
  <div class="flex gap-30" style="justify-content:center; flex-wrap:wrap;">
    <div style="text-align:center;">
      <div style="font-size:1rem; color:#a0a8b8; margin-bottom:15px;">To generate 1 token:</div>
      <div style="display:flex; flex-direction:column; gap:12px;">
        <div style="display:flex; align-items:center; gap:15px;">
          <div style="width:150px; height:45px; background:var(--red); border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff;">Model Weights</div>
          <span class="mono" style="font-size:1rem;">140 GB</span>
        </div>
        <div style="display:flex; align-items:center; gap:15px;">
          <div style="width:150px; height:45px; background:var(--blue); border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff;">KV-Cache</div>
          <span class="mono" style="font-size:1rem;">41 GB</span>
          <span style="font-size:0.9rem; color:#8898b8;">(at 128K)</span>
        </div>
        <div style="border-top:2px solid #3a4a6a; padding-top:12px; display:flex; align-items:center; gap:15px;">
          <div style="width:150px; font-size:1rem; color:#a0a8b8;">Total reads</div>
          <span class="mono" style="font-size:1.1rem; color:var(--cyan);">181 GB</span>
        </div>
      </div>
    </div>
    
    <div class="info-box">
      <div style="font-size:1rem; color:#8898b8; margin-bottom:18px;">Bandwidth requirement:</div>
      <div class="equation" style="background:transparent; padding:0;">
At 20 tokens/sec:
181 GB Ã— 20 = <span style="color:var(--cyan); font-weight:600;">3.62 TB/s</span>

B200 provides: 8 TB/s âœ“
      </div>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>5. The Memory Wall</h2>
<p>GPU memory capacity, not compute or bandwidth, becomes the limiting factor with multiple users.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 5.1 â€” Single User Memory Layout</div>
  
  <div style="margin-bottom:18px;">
    <div style="display:flex; justify-content:space-between; font-size:1rem; color:#8898b8; margin-bottom:8px;">
      <span>B200 HBM â€” 192 GB</span>
      <span>10 GB free</span>
    </div>
    <div class="mem-bar">
      <div style="width:73%; background:var(--red);">Model Weights â€” 140 GB</div>
      <div style="width:21%; background:var(--blue);">KV â€” 41 GB</div>
      <div style="width:6%; background:#2a3a5a; color:#6a7a9a;">Free</div>
    </div>
  </div>
  
  <div style="text-align:center; padding:18px; background:rgba(81,207,102,0.15); border:2px solid var(--green); border-radius:10px; margin-top:25px;">
    <span style="color:var(--green); font-size:1.05rem;">âœ“ Single user at 128K context fits</span>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 5.2 â€” Multi-User Memory Explosion</div>
  
  <div style="display:flex; flex-direction:column; gap:20px;">
    <div>
      <div style="display:flex; justify-content:space-between; font-size:0.95rem; color:#8898b8; margin-bottom:6px;">
        <span>2 users</span>
        <span style="color:var(--orange);">222 GB needed</span>
      </div>
      <div class="mem-bar" style="height:40px;">
        <div style="width:63%; background:var(--red); font-size:0.9rem;">Weights</div>
        <div style="width:37%; background:var(--blue); font-size:0.9rem;">KV Ã—2</div>
      </div>
    </div>
    
    <div>
      <div style="display:flex; justify-content:space-between; font-size:0.95rem; color:#8898b8; margin-bottom:6px;">
        <span>4 users</span>
        <span style="color:var(--orange);">304 GB needed</span>
      </div>
      <div class="mem-bar" style="height:40px;">
        <div style="width:46%; background:var(--red); font-size:0.9rem;">Weights</div>
        <div style="width:54%; background:var(--blue); font-size:0.9rem;">KV Ã—4</div>
      </div>
    </div>
    
    <div>
      <div style="display:flex; justify-content:space-between; font-size:0.95rem; color:#8898b8; margin-bottom:6px;">
        <span>8 users</span>
        <span style="color:var(--red);">468 GB needed</span>
      </div>
      <div class="mem-bar" style="height:40px;">
        <div style="width:30%; background:var(--red); font-size:0.9rem;">Weights</div>
        <div style="width:70%; background:var(--blue); font-size:0.9rem;">KV Ã—8</div>
      </div>
    </div>
  </div>
  
  <div style="margin-top:25px; display:flex; gap:20px; justify-content:center; flex-wrap:wrap;">
    <div style="padding:15px 25px; background:rgba(255,107,107,0.15); border:2px solid var(--red); border-radius:10px;">
      <span style="color:var(--red); font-size:1rem;">B200 capacity: 192 GB</span>
    </div>
    <div style="padding:15px 25px; background:rgba(255,107,107,0.15); border:2px solid var(--red); border-radius:10px;">
      <span style="color:var(--red); font-size:1rem;">8 users need: 468 GB (2.4Ã— over)</span>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>6. Attention Locality</h2>
<p>Empirical measurement reveals that attention concentrates heavily on recent tokens.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 6.1 â€” Attention Distribution (10K Context)</div>
  
  <div style="display:flex; gap:40px; justify-content:center; flex-wrap:wrap;">
    <div style="width:320px;">
      <div style="display:flex; height:220px; align-items:flex-end; gap:12px; padding:25px; background:#1a2245; border-radius:12px;">
        <div style="flex:1; display:flex; flex-direction:column; align-items:center;">
          <div style="flex:1; width:100%; display:flex; align-items:flex-end;">
            <div style="width:100%; height:5%; background:var(--cyan); border-radius:4px 4px 0 0;"></div>
          </div>
          <div style="font-size:0.85rem; color:#8898b8; margin-top:12px; text-align:center;">0-1K<br><span class="mono">5%</span></div>
        </div>
        <div style="flex:1; display:flex; flex-direction:column; align-items:center;">
          <div style="flex:1; width:100%; display:flex; align-items:flex-end;">
            <div style="width:100%; height:15%; background:var(--cyan); border-radius:4px 4px 0 0;"></div>
          </div>
          <div style="font-size:0.85rem; color:#8898b8; margin-top:12px; text-align:center;">1-9K<br><span class="mono">15%</span></div>
        </div>
        <div style="flex:1; display:flex; flex-direction:column; align-items:center;">
          <div style="flex:1; width:100%; display:flex; align-items:flex-end;">
            <div style="width:100%; height:80%; background:var(--cyan); border-radius:4px 4px 0 0;"></div>
          </div>
          <div style="font-size:0.85rem; color:#8898b8; margin-top:12px; text-align:center;">9-10K<br><span class="mono">80%</span></div>
        </div>
      </div>
    </div>
    
    <div class="info-box" style="text-align:center;">
      <div style="font-size:1rem; color:#8898b8; margin-bottom:18px;">Key insight:</div>
      <div style="font-size:2.5rem; color:var(--cyan); font-weight:700; margin-bottom:12px;">~80%</div>
      <div style="font-size:1.1rem; color:#a0a8b8;">of attention goes to</div>
      <div style="font-size:2.5rem; color:var(--cyan); font-weight:700; margin:12px 0;">~10%</div>
      <div style="font-size:1.1rem; color:#a0a8b8;">most recent tokens</div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 6.2 â€” Attention Heatmap (Simplified)</div>
  
  <div style="display:flex; gap:40px; align-items:center; justify-content:center; flex-wrap:wrap;">
    <div>
      <div style="font-size:0.95rem; color:#8898b8; margin-bottom:15px; text-align:center;">Current token attending to context</div>
      <div style="display:flex;">
        <div style="writing-mode:vertical-rl; transform:rotate(180deg); font-size:0.85rem; color:#8898b8; padding-right:12px;">â† Earlier | Recent â†’</div>
        <div style="display:grid; grid-template-columns:repeat(20,16px); gap:3px;">
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.05); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.05); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.08); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.05); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.1); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.08); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.05); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.12); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.08); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.15); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.2); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.25); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.35); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.4); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.5); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.6); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.75); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.85); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,0.95); border-radius:3px;"></div>
          <div style="width:16px; height:16px; background:rgba(34,211,238,1); border-radius:3px;"></div>
        </div>
      </div>
      <div style="display:flex; justify-content:space-between; font-size:0.85rem; color:#6a7a9a; margin-top:8px; width:350px; margin-left:25px;">
        <span>Position 0</span>
        <span>Position N</span>
      </div>
    </div>
    
    <div style="display:flex; flex-direction:column; gap:8px;">
      <div style="display:flex; align-items:center; gap:12px;">
        <div style="width:24px; height:16px; background:rgba(34,211,238,0.1); border-radius:3px;"></div>
        <span style="font-size:0.95rem; color:#8898b8;">Low attention</span>
      </div>
      <div style="display:flex; align-items:center; gap:12px;">
        <div style="width:24px; height:16px; background:rgba(34,211,238,0.5); border-radius:3px;"></div>
        <span style="font-size:0.95rem; color:#8898b8;">Medium</span>
      </div>
      <div style="display:flex; align-items:center; gap:12px;">
        <div style="width:24px; height:16px; background:rgba(34,211,238,1); border-radius:3px;"></div>
        <span style="font-size:0.95rem; color:#8898b8;">High attention</span>
      </div>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>7. RoPE: Why Locality Emerges</h2>
<p>Rotary Position Embedding creates locality as a geometric property of how positions are encoded.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 7.1 â€” RoPE Rotation Concept</div>
  
  <div class="flex gap-40" style="justify-content:center; flex-wrap:wrap;">
    <div style="text-align:center;">
      <div style="font-size:1rem; color:#a0a8b8; margin-bottom:18px;">Each dimension pair rotates at different frequency</div>
      <svg width="240" height="240" viewBox="0 0 240 240">
        <circle cx="120" cy="120" r="95" fill="none" stroke="#3a4a6a" stroke-width="2"/>
        <line x1="120" y1="120" x2="205" y2="120" stroke="var(--red)" stroke-width="3"/>
        <circle cx="205" cy="120" r="6" fill="var(--red)"/>
        <line x1="120" y1="120" x2="185" y2="65" stroke="var(--orange)" stroke-width="3"/>
        <circle cx="185" cy="65" r="6" fill="var(--orange)"/>
        <line x1="120" y1="120" x2="210" y2="105" stroke="var(--green)" stroke-width="3"/>
        <circle cx="210" cy="105" r="6" fill="var(--green)"/>
        <circle cx="120" cy="120" r="5" fill="#fff"/>
        <text x="210" y="138" fill="var(--red)" font-size="13" font-family="monospace">Î¸â‚€ = 1.0</text>
        <text x="188" y="58" fill="var(--orange)" font-size="13" font-family="monospace">Î¸â‚ƒâ‚‚</text>
        <text x="212" y="98" fill="var(--green)" font-size="13" font-family="monospace">Î¸â‚†â‚ƒ = 0.0001</text>
      </svg>
      <div style="font-size:0.95rem; color:#8898b8; margin-top:15px;">Position m rotates each pair by m Ã— Î¸áµ¢</div>
    </div>
    
    <div class="info-box">
      <div style="font-size:1rem; color:#8898b8; margin-bottom:15px;">Frequency formula:</div>
      <div class="equation" style="background:transparent; padding:12px 0;">
Î¸áµ¢ = 10000<sup>âˆ’2i/d</sup>

Î¸â‚€  = 1.0       <span style="color:#6a7a9a;">(fast)</span>
Î¸â‚ƒâ‚‚ = 0.01     <span style="color:#6a7a9a;">(medium)</span>
Î¸â‚†â‚ƒ = 0.0001   <span style="color:#6a7a9a;">(slow)</span>
      </div>
      <div style="font-size:1rem; color:#a0a8b8; margin-top:18px;">
        Fast dims â†’ local patterns<br>
        Slow dims â†’ global patterns
      </div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 7.2 â€” Distance-Dependent Decay</div>
  
  <div style="margin-bottom:25px;">
    <div style="font-size:1rem; color:#a0a8b8; margin-bottom:20px;">Average cosine factor by distance:</div>
    
    <div class="bar-chart">
      <div class="bar-row">
        <div class="bar-label">Distance 1</div>
        <div class="bar-container">
          <div class="bar-fill" style="width:99%; background:var(--green);">0.99</div>
        </div>
      </div>
      <div class="bar-row">
        <div class="bar-label">Distance 10</div>
        <div class="bar-container">
          <div class="bar-fill" style="width:95%; background:var(--green);">0.95</div>
        </div>
      </div>
      <div class="bar-row">
        <div class="bar-label">Distance 100</div>
        <div class="bar-container">
          <div class="bar-fill" style="width:71%; background:var(--cyan);">0.71</div>
        </div>
      </div>
      <div class="bar-row">
        <div class="bar-label">Distance 1,000</div>
        <div class="bar-container">
          <div class="bar-fill" style="width:32%; background:var(--orange);">0.32</div>
        </div>
      </div>
      <div class="bar-row">
        <div class="bar-label">Distance 10,000</div>
        <div class="bar-container">
          <div class="bar-fill" style="width:11%; background:var(--red);">0.11</div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="equation">
score(m, n) âˆ Î£áµ¢ cos((m âˆ’ n) Â· Î¸áµ¢)

<span style="color:var(--green);">Small distance â†’ cos â‰ˆ 1 â†’ high attention</span>
<span style="color:var(--red);">Large distance â†’ cos oscillates â†’ lower attention</span>
  </div>
</div>

<!-- ============================================ -->
<h2>8. Attention Head Types</h2>
<p>Different attention heads specialize for different functions, creating varied access patterns.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 8.1 â€” Head Specialization</div>
  
  <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:20px;">
    <div style="padding:25px; background:#1a2245; border-radius:12px; border-left:4px solid var(--blue);">
      <div style="font-size:1.1rem; color:var(--blue); font-weight:600; margin-bottom:10px;">Recency Heads</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-bottom:15px;">~40% of heads</div>
      <div style="display:flex; height:35px; gap:3px; margin-bottom:12px;">
        <div style="flex:8; background:rgba(77,171,247,0.15); border-radius:4px;"></div>
        <div style="flex:2; background:var(--blue); border-radius:4px;"></div>
      </div>
      <div style="font-size:0.9rem; color:#8898b8;">Focus on last 50-200 tokens</div>
    </div>
    
    <div style="padding:25px; background:#1a2245; border-radius:12px; border-left:4px solid var(--purple);">
      <div style="font-size:1.1rem; color:var(--purple); font-weight:600; margin-bottom:10px;">Anchor Heads</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-bottom:15px;">~15% of heads</div>
      <div style="display:flex; height:35px; gap:3px; margin-bottom:12px;">
        <div style="flex:1; background:var(--purple); border-radius:4px;"></div>
        <div style="flex:7; background:rgba(204,93,232,0.15); border-radius:4px;"></div>
        <div style="flex:2; background:rgba(204,93,232,0.5); border-radius:4px;"></div>
      </div>
      <div style="font-size:0.9rem; color:#8898b8;">Always check position 0-100</div>
    </div>
    
    <div style="padding:25px; background:#1a2245; border-radius:12px; border-left:4px solid var(--orange);">
      <div style="font-size:1.1rem; color:var(--orange); font-weight:600; margin-bottom:10px;">Retrieval Heads</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-bottom:15px;">~25% of heads</div>
      <div style="display:flex; height:35px; gap:3px; margin-bottom:12px;">
        <div style="flex:2; background:rgba(255,146,43,0.2); border-radius:4px;"></div>
        <div style="flex:1; background:var(--orange); border-radius:4px;"></div>
        <div style="flex:3; background:rgba(255,146,43,0.15); border-radius:4px;"></div>
        <div style="flex:1; background:rgba(255,146,43,0.6); border-radius:4px;"></div>
        <div style="flex:3; background:rgba(255,146,43,0.3); border-radius:4px;"></div>
      </div>
      <div style="font-size:0.9rem; color:#8898b8;">Content-based, position-independent</div>
    </div>
    
    <div style="padding:25px; background:#1a2245; border-radius:12px; border-left:4px solid var(--green);">
      <div style="font-size:1.1rem; color:var(--green); font-weight:600; margin-bottom:10px;">Syntactic Heads</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-bottom:15px;">~20% of heads</div>
      <div style="display:flex; height:35px; gap:3px; margin-bottom:12px;">
        <div style="flex:1; background:rgba(81,207,102,0.15); border-radius:4px;"></div>
        <div style="flex:1; background:var(--green); border-radius:4px;"></div>
        <div style="flex:2; background:rgba(81,207,102,0.15); border-radius:4px;"></div>
        <div style="flex:1; background:rgba(81,207,102,0.5); border-radius:4px;"></div>
        <div style="flex:2; background:rgba(81,207,102,0.15); border-radius:4px;"></div>
        <div style="flex:1; background:rgba(81,207,102,0.7); border-radius:4px;"></div>
        <div style="flex:2; background:rgba(81,207,102,0.2); border-radius:4px;"></div>
      </div>
      <div style="font-size:0.9rem; color:#8898b8;">Follow grammatical dependencies</div>
    </div>
  </div>
  
  <div class="diagram-caption">
    Implication: A single caching policy cannot satisfy all heads. Per-head tracking required.
  </div>
</div>

<!-- ============================================ -->
<h2>9. CXL Architecture</h2>
<p>CXL provides memory expansion at lower cost and bandwidth than HBM.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 9.1 â€” System Topology</div>
  
  <div style="display:flex; flex-direction:column; align-items:center; gap:15px;">
    <div style="width:340px; padding:25px; background:linear-gradient(135deg, #1e2a4a 0%, #162040 100%); border:3px solid var(--cyan); border-radius:16px; text-align:center;">
      <div style="font-size:1.1rem; color:var(--cyan); font-weight:600;">NVIDIA B200</div>
      <div style="display:flex; justify-content:center; gap:25px; margin-top:18px;">
        <div>
          <div style="font-size:1.5rem; color:#fff; font-weight:600;">192 GB</div>
          <div style="font-size:0.85rem; color:#8898b8;">HBM Capacity</div>
        </div>
        <div>
          <div style="font-size:1.5rem; color:#fff; font-weight:600;">8 TB/s</div>
          <div style="font-size:0.85rem; color:#8898b8;">Bandwidth</div>
        </div>
        <div>
          <div style="font-size:1.5rem; color:#fff; font-weight:600;">100ns</div>
          <div style="font-size:0.85rem; color:#8898b8;">Latency</div>
        </div>
      </div>
    </div>
    
    <div style="display:flex; flex-direction:column; align-items:center;">
      <div style="width:5px; height:35px; background:linear-gradient(to bottom, var(--cyan), var(--purple));"></div>
      <div style="padding:8px 18px; background:#1a2245; border-radius:6px; font-size:0.9rem; color:#a0a8b8;">CXL 3.0 Ã— 16 â€” 64 GB/s</div>
      <div style="width:5px; height:35px; background:linear-gradient(to bottom, var(--purple), var(--purple));"></div>
    </div>
    
    <div style="width:280px; padding:15px; background:#1e2a4a; border:2px solid var(--purple); border-radius:10px; text-align:center;">
      <div style="font-size:1rem; color:var(--purple);">CXL Switch / Fabric</div>
    </div>
    
    <div style="display:flex; gap:15px; margin-top:12px;">
      <div style="width:3px; height:25px; background:var(--purple);"></div>
      <div style="width:3px; height:25px; background:var(--purple);"></div>
      <div style="width:3px; height:25px; background:var(--purple);"></div>
      <div style="width:3px; height:25px; background:var(--purple);"></div>
    </div>
    
    <div style="display:flex; gap:15px;">
      <div style="padding:18px; background:#1a2245; border:1px solid #3a4a6a; border-radius:10px; text-align:center;">
        <div style="font-size:0.95rem; color:#8898b8;">EP 0</div>
        <div style="font-size:1.1rem; color:#fff;">256 GB</div>
      </div>
      <div style="padding:18px; background:#1a2245; border:1px solid #3a4a6a; border-radius:10px; text-align:center;">
        <div style="font-size:0.95rem; color:#8898b8;">EP 1</div>
        <div style="font-size:1.1rem; color:#fff;">256 GB</div>
      </div>
      <div style="padding:18px; background:#1a2245; border:1px solid #3a4a6a; border-radius:10px; text-align:center;">
        <div style="font-size:0.95rem; color:#8898b8;">EP 2</div>
        <div style="font-size:1.1rem; color:#fff;">256 GB</div>
      </div>
      <div style="padding:18px; background:#1a2245; border:1px solid #3a4a6a; border-radius:10px; text-align:center;">
        <div style="font-size:0.95rem; color:#8898b8;">EP 3</div>
        <div style="font-size:1.1rem; color:#fff;">256 GB</div>
      </div>
    </div>
    
    <div style="margin-top:18px; padding:14px 28px; background:rgba(204,93,232,0.15); border:2px solid var(--purple); border-radius:10px;">
      <span style="color:var(--purple); font-size:1rem;">Total CXL: 1 TB @ 256 GB/s aggregate</span>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 9.2 â€” HBM vs CXL Comparison</div>
  
  <table>
    <thead>
      <tr>
        <th></th>
        <th>GPU HBM</th>
        <th>CXL DRAM</th>
        <th>Ratio</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Bandwidth</td>
        <td class="mono">8 TB/s</td>
        <td class="mono">256 GB/s</td>
        <td style="color:var(--red);">31Ã— less</td>
      </tr>
      <tr>
        <td>Latency</td>
        <td class="mono">100 ns</td>
        <td class="mono">250 ns</td>
        <td style="color:var(--orange);">2.5Ã— more</td>
      </tr>
      <tr>
        <td>Capacity</td>
        <td class="mono">192 GB</td>
        <td class="mono">1 TB</td>
        <td style="color:var(--green);">5Ã— more</td>
      </tr>
      <tr>
        <td>Cost per GB</td>
        <td class="mono">~$50</td>
        <td class="mono">~$5</td>
        <td style="color:var(--green);">10Ã— less</td>
      </tr>
    </tbody>
  </table>
  
  <div class="diagram-caption">
    CXL tradeoff: 10Ã— cheaper per GB, but 31Ã— lower bandwidth. Viable only if most accesses hit HBM.
  </div>
</div>

<!-- ============================================ -->
<h2>10. Tiered Memory Hierarchy</h2>
<p>The caching system places data in tiers based on access patterns.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 10.1 â€” Three-Tier Architecture</div>
  
  <div style="display:flex; flex-direction:column; gap:18px; max-width:550px; margin:0 auto;">
    <div style="padding:24px; background:linear-gradient(90deg, rgba(34,211,238,0.2) 0%, rgba(34,211,238,0.05) 100%); border:2px solid var(--cyan); border-radius:12px;">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <div style="font-size:1.1rem; color:var(--cyan); font-weight:600;">Tier 0 â€” HBM Pinned</div>
          <div style="font-size:0.95rem; color:#8898b8; margin-top:6px;">Anchor zone + critical tokens</div>
        </div>
        <div style="text-align:right;">
          <div class="mono" style="font-size:1.1rem;">5 GB</div>
          <div style="font-size:0.9rem; color:#8898b8;">100 ns</div>
        </div>
      </div>
    </div>
    
    <div style="padding:24px; background:linear-gradient(90deg, rgba(77,171,247,0.2) 0%, rgba(77,171,247,0.05) 100%); border:2px solid var(--blue); border-radius:12px;">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <div style="font-size:1.1rem; color:var(--blue); font-weight:600;">Tier 1 â€” HBM Evictable</div>
          <div style="font-size:0.95rem; color:#8898b8; margin-top:6px;">Recent + high-attention tokens</div>
        </div>
        <div style="text-align:right;">
          <div class="mono" style="font-size:1.1rem;">37 GB</div>
          <div style="font-size:0.9rem; color:#8898b8;">100 ns</div>
        </div>
      </div>
    </div>
    
    <div style="padding:24px; background:linear-gradient(90deg, rgba(204,93,232,0.2) 0%, rgba(204,93,232,0.05) 100%); border:2px solid var(--purple); border-radius:12px;">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <div style="font-size:1.1rem; color:var(--purple); font-weight:600;">Tier 2 â€” CXL DRAM</div>
          <div style="font-size:0.95rem; color:#8898b8; margin-top:6px;">Cold tokens, low attention</div>
        </div>
        <div style="text-align:right;">
          <div class="mono" style="font-size:1.1rem;">280 GB</div>
          <div style="font-size:0.9rem; color:#8898b8;">250 ns</div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 10.2 â€” Memory Layout (8 Users Ã— 128K)</div>
  
  <div style="margin-bottom:30px;">
    <div style="font-size:1rem; color:#a0a8b8; margin-bottom:10px;">HBM â€” 192 GB</div>
    <div class="mem-bar">
      <div style="width:73%; background:var(--red);">Model Weights â€” 140 GB</div>
      <div style="width:5%; background:var(--purple);"></div>
      <div style="width:3%; background:var(--cyan);"></div>
      <div style="width:18%; background:var(--blue);">Hot KV</div>
      <div style="width:1%; background:#2a3a5a;"></div>
    </div>
    <div style="display:flex; gap:20px; margin-top:12px; font-size:0.9rem; flex-wrap:wrap;">
      <div style="display:flex; align-items:center; gap:8px;"><div style="width:14px; height:14px; background:var(--red); border-radius:3px;"></div> Weights</div>
      <div style="display:flex; align-items:center; gap:8px;"><div style="width:14px; height:14px; background:var(--purple); border-radius:3px;"></div> Activations</div>
      <div style="display:flex; align-items:center; gap:8px;"><div style="width:14px; height:14px; background:var(--cyan); border-radius:3px;"></div> Pinned KV</div>
      <div style="display:flex; align-items:center; gap:8px;"><div style="width:14px; height:14px; background:var(--blue); border-radius:3px;"></div> Hot KV</div>
    </div>
  </div>
  
  <div>
    <div style="font-size:1rem; color:#a0a8b8; margin-bottom:10px;">CXL â€” 1 TB</div>
    <div class="mem-bar">
      <div style="width:28%; background:var(--purple);">Cold KV â€” 280 GB</div>
      <div style="width:72%; background:#1e2a4a; color:#6a7a9a;">Available â€” 720 GB</div>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>11. EMA Scoring Algorithm</h2>
<p>Exponential Moving Average tracks which tokens actually receive attention over time.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 11.1 â€” EMA Update Rule</div>
  
  <div class="equation" style="text-align:center; font-size:1.2rem;">
score<sub>t</sub> = Î± Â· attention<sub>t</sub> + (1 âˆ’ Î±) Â· score<sub>tâˆ’1</sub>
  </div>
  
  <div style="display:flex; justify-content:center; gap:35px; margin-top:30px; flex-wrap:wrap;">
    <div style="padding:20px 32px; background:#1a2245; border-radius:12px; text-align:center;">
      <div style="font-size:2rem; color:var(--cyan); font-weight:600;">Î± = 0.2</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-top:8px;">Decay factor</div>
    </div>
    <div style="padding:20px 32px; background:#1a2245; border-radius:12px; text-align:center;">
      <div style="font-size:2rem; color:var(--cyan); font-weight:600;">3.1 steps</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-top:8px;">Half-life</div>
    </div>
    <div style="padding:20px 32px; background:#1a2245; border-radius:12px; text-align:center;">
      <div style="font-size:2rem; color:var(--cyan); font-weight:600;">~155 ms</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-top:8px;">At 20 tok/s</div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 11.2 â€” EMA Evolution Example</div>
  
  <div class="compare">
    <div class="compare-side" style="background:rgba(81,207,102,0.08); border:2px solid #2a4a3a;">
      <div class="compare-title" style="color:var(--green);">System Instruction Token</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-bottom:18px;">Position 50 â€” "helpful"</div>
      
      <div style="font-size:0.9rem; color:#8898b8; margin-bottom:12px;">Consistent attention from anchor heads:</div>
      <div style="display:flex; flex-direction:column; gap:8px; font-family:monospace; font-size:0.95rem;">
        <div>Step 0: attn=0.04 â†’ score=<span style="color:var(--green);">0.008</span></div>
        <div>Step 1: attn=0.03 â†’ score=<span style="color:var(--green);">0.012</span></div>
        <div>Step 2: attn=0.05 â†’ score=<span style="color:var(--green);">0.020</span></div>
        <div style="color:#6a7a9a;">...</div>
        <div>Step 100: â†’ score=<span style="color:var(--green);">0.040</span></div>
      </div>
      
      <div style="margin-top:18px; padding:14px; background:rgba(81,207,102,0.15); border-radius:8px; text-align:center;">
        <span style="color:var(--green); font-size:1rem;">â†’ Stays HOT</span>
      </div>
    </div>
    
    <div class="compare-side" style="background:rgba(255,107,107,0.08); border:2px solid #4a2a2a;">
      <div class="compare-title" style="color:var(--red);">Generic Middle Token</div>
      <div style="font-size:0.95rem; color:#8898b8; margin-bottom:18px;">Position 45,000 â€” "the"</div>
      
      <div style="font-size:0.9rem; color:#8898b8; margin-bottom:12px;">Rarely attended:</div>
      <div style="display:flex; flex-direction:column; gap:8px; font-family:monospace; font-size:0.95rem;">
        <div>Step 0: attn=0.001 â†’ score=<span style="color:var(--red);">0.0002</span></div>
        <div>Step 1: attn=0.000 â†’ score=<span style="color:var(--red);">0.0002</span></div>
        <div>Step 2: attn=0.002 â†’ score=<span style="color:var(--red);">0.0005</span></div>
        <div style="color:#6a7a9a;">...</div>
        <div>Step 100: â†’ score=<span style="color:var(--red);">0.001</span></div>
      </div>
      
      <div style="margin-top:18px; padding:14px; background:rgba(255,107,107,0.15); border-radius:8px; text-align:center;">
        <span style="color:var(--red); font-size:1rem;">â†’ Evict to CXL</span>
      </div>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>12. Priority Scoring Formula</h2>
<p>Final placement decisions combine multiple signals into a single priority score.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 12.1 â€” Scoring Components</div>
  
  <div style="display:flex; flex-direction:column; gap:18px; max-width:650px; margin:0 auto;">
    <div style="display:flex; align-items:center; gap:18px;">
      <div style="width:120px; text-align:right; font-size:1.05rem; color:var(--blue);">Recency</div>
      <div style="flex:1; height:30px; background:#1a2245; border-radius:6px; overflow:hidden;">
        <div style="width:25%; height:100%; background:var(--blue); display:flex; align-items:center; padding-left:12px; font-size:0.9rem; font-weight:600;">25%</div>
      </div>
    </div>
    <div style="display:flex; align-items:center; gap:18px;">
      <div style="width:120px; text-align:right; font-size:1.05rem; color:var(--cyan);">EMA Score</div>
      <div style="flex:1; height:30px; background:#1a2245; border-radius:6px; overflow:hidden;">
        <div style="width:55%; height:100%; background:var(--cyan); display:flex; align-items:center; padding-left:12px; font-size:0.9rem; font-weight:600; color:#111;">55%</div>
      </div>
    </div>
    <div style="display:flex; align-items:center; gap:18px;">
      <div style="width:120px; text-align:right; font-size:1.05rem; color:var(--purple);">Anchor Zone</div>
      <div style="flex:1; height:30px; background:#1a2245; border-radius:6px; overflow:hidden;">
        <div style="width:20%; height:100%; background:var(--purple); display:flex; align-items:center; padding-left:12px; font-size:0.9rem; font-weight:600;">20%</div>
      </div>
    </div>
  </div>
  
  <div class="equation" style="margin-top:30px; text-align:center;">
P(p) = 0.25 Â· R(p) + 0.55 Â· E(p) + 0.20 Â· N(p)
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 12.2 â€” Tier Assignment Thresholds</div>
  
  <div style="position:relative; height:70px; background:linear-gradient(90deg, var(--purple) 0%, var(--purple) 30%, var(--blue) 30%, var(--blue) 60%, var(--cyan) 60%, var(--cyan) 100%); border-radius:10px; margin:25px 0;">
    <div style="position:absolute; left:0; top:0; bottom:0; width:30%; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff;">Tier 2 (CXL)</div>
    <div style="position:absolute; left:30%; top:0; bottom:0; width:30%; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff;">Tier 1 (HBM)</div>
    <div style="position:absolute; left:60%; top:0; bottom:0; width:40%; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#111;">Tier 0 (Pinned)</div>
  </div>
  
  <div style="display:flex; justify-content:space-between; font-size:0.95rem; color:#a0a8b8; padding:0 15px;">
    <span>P = 0</span>
    <span>P = 0.3</span>
    <span>P = 0.6</span>
    <span>P = 1.0</span>
  </div>
</div>

<!-- ============================================ -->
<h2>13. Per-Head Tracking</h2>
<p>Scores are maintained separately for each KV-head to handle head specialization.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 13.1 â€” Per-Head Score Matrix</div>
  
  <div style="overflow-x:auto;">
    <table style="min-width:600px;">
      <thead>
        <tr>
          <th>Position</th>
          <th>Head 0<br><span style="font-weight:normal; font-size:0.8rem;">(recency)</span></th>
          <th>Head 1<br><span style="font-weight:normal; font-size:0.8rem;">(anchor)</span></th>
          <th>Head 2<br><span style="font-weight:normal; font-size:0.8rem;">(retrieval)</span></th>
          <th>Head 3-7</th>
          <th>Aggregate</th>
          <th>Decision</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>0 (system)</td>
          <td class="mono" style="color:#6a7a9a;">0.001</td>
          <td class="mono" style="color:var(--green);">0.089</td>
          <td class="mono" style="color:#a0a8b8;">0.012</td>
          <td class="mono" style="color:#6a7a9a;">...</td>
          <td class="mono" style="color:var(--green);">0.089</td>
          <td style="color:var(--cyan);">HBM</td>
        </tr>
        <tr>
          <td>45,000</td>
          <td class="mono" style="color:#6a7a9a;">0.000</td>
          <td class="mono" style="color:#6a7a9a;">0.002</td>
          <td class="mono" style="color:#6a7a9a;">0.003</td>
          <td class="mono" style="color:#6a7a9a;">...</td>
          <td class="mono" style="color:var(--red);">0.003</td>
          <td style="color:var(--purple);">CXL</td>
        </tr>
        <tr>
          <td>99,950</td>
          <td class="mono" style="color:var(--green);">0.082</td>
          <td class="mono" style="color:#6a7a9a;">0.004</td>
          <td class="mono" style="color:#a0a8b8;">0.031</td>
          <td class="mono" style="color:#6a7a9a;">...</td>
          <td class="mono" style="color:var(--green);">0.082</td>
          <td style="color:var(--cyan);">HBM</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div class="equation" style="margin-top:25px; text-align:center;">
P<sub>aggregate</sub>(p) = max( P<sub>h</sub>(p) ) for all heads h
  </div>
  
  <div class="diagram-caption">
    Position stays in HBM if ANY head needs it. Evict only when NO head has recent access.
  </div>
</div>

<!-- ============================================ -->
<h2>14. Prefetching Strategy</h2>
<p>Predictive prefetch loads anticipated tokens from CXL before they're needed.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 14.1 â€” Prefetch Targets</div>
  
  <div style="position:relative; height:100px; background:#1a2245; border-radius:12px; margin:25px 0; overflow:hidden;">
    <div style="position:absolute; left:5%; right:5%; top:30px; height:40px; background:#252a48; border-radius:6px;">
      <div style="position:absolute; left:0; top:0; bottom:0; width:8%; background:rgba(204,93,232,0.5); border-radius:6px 0 0 6px;"></div>
      <div style="position:absolute; right:0; top:0; bottom:0; width:15%; background:rgba(77,171,247,0.5); border-radius:0 6px 6px 0;"></div>
      <div style="position:absolute; left:25%; top:0; bottom:0; width:3%; background:rgba(34,211,238,0.5);"></div>
      <div style="position:absolute; left:45%; top:0; bottom:0; width:2%; background:rgba(34,211,238,0.5);"></div>
      <div style="position:absolute; left:62%; top:0; bottom:0; width:4%; background:rgba(34,211,238,0.5);"></div>
    </div>
    
    <div style="position:absolute; left:5%; top:78px; font-size:0.85rem; color:var(--purple);">Anchor (0-100)</div>
    <div style="position:absolute; right:5%; top:78px; font-size:0.85rem; color:var(--blue); text-align:right;">Recent (m-200 to m)</div>
    <div style="position:absolute; left:40%; top:78px; font-size:0.85rem; color:var(--cyan);">High-EMA</div>
  </div>
  
  <div style="display:flex; justify-content:center; gap:20px; flex-wrap:wrap; margin-top:25px;">
    <div style="padding:14px 24px; background:rgba(204,93,232,0.15); border:2px solid var(--purple); border-radius:10px; font-size:1rem;">
      <span style="color:var(--purple);">1.</span> Anchor zone [0, 100]
    </div>
    <div style="padding:14px 24px; background:rgba(77,171,247,0.15); border:2px solid var(--blue); border-radius:10px; font-size:1rem;">
      <span style="color:var(--blue);">2.</span> Recent [mâˆ’200, mâˆ’1]
    </div>
    <div style="padding:14px 24px; background:rgba(34,211,238,0.15); border:2px solid var(--cyan); border-radius:10px; font-size:1rem;">
      <span style="color:var(--cyan);">3.</span> High-EMA positions
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 14.2 â€” Prefetch Timing Budget</div>
  
  <div style="display:flex; align-items:center; gap:25px; justify-content:center; flex-wrap:wrap;">
    <div style="display:flex; flex-direction:column; gap:10px; align-items:center;">
      <div style="width:170px; height:50px; background:var(--blue); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff;">Token Generation</div>
      <div class="mono" style="font-size:1.05rem;">50 ms</div>
    </div>
    
    <div style="font-size:2rem; color:#6a7a9a;">âˆ’</div>
    
    <div style="display:flex; flex-direction:column; gap:10px; align-items:center;">
      <div style="width:140px; height:50px; background:var(--purple); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff;">Compute</div>
      <div class="mono" style="font-size:1.05rem;">20 ms</div>
    </div>
    
    <div style="font-size:2rem; color:#6a7a9a;">=</div>
    
    <div style="display:flex; flex-direction:column; gap:10px; align-items:center;">
      <div style="width:160px; height:50px; background:var(--green); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:1rem; color:#fff;">Prefetch Window</div>
      <div class="mono" style="font-size:1.05rem;">30 ms</div>
    </div>
  </div>
  
  <div style="margin-top:30px; padding:20px; background:#1a2245; border-radius:12px; text-align:center;">
    <div style="font-size:1.05rem; color:#a0a8b8;">Prefetch capacity @ 256 GB/s:</div>
    <div style="font-size:1.6rem; color:var(--cyan); font-weight:600; margin-top:10px;">7.68 GB â‰ˆ 24,000 positions</div>
  </div>
</div>

<!-- ============================================ -->
<h2>15. Hit Rate Progression</h2>
<p>Each algorithmic improvement increases the HBM hit rate.</p>

<div class="diagram">
  <div class="diagram-label">Diagram 15.1 â€” Algorithm Contribution</div>
  
  <div class="bar-chart">
    <div class="bar-row">
      <div class="bar-label">LRU baseline</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:70%; background:var(--red);">70%</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">+ Anchor pinning</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:78%; background:var(--orange);">78%</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">+ EMA scoring</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:85%; background:var(--yellow);">85%</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">+ Per-head tracking</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:91%; background:var(--cyan);">91%</div>
      </div>
    </div>
    <div class="bar-row">
      <div class="bar-label">+ Prefetching</div>
      <div class="bar-container">
        <div class="bar-fill" style="width:95%; background:var(--green);">95%</div>
      </div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 15.2 â€” Effective Latency</div>
  
  <div class="equation" style="text-align:center; margin-bottom:30px;">
L<sub>eff</sub> = (hit_rate Ã— L<sub>HBM</sub>) + ((1 âˆ’ hit_rate) Ã— L<sub>CXL</sub>)
  </div>
  
  <div style="display:flex; justify-content:center; gap:35px; flex-wrap:wrap;">
    <div style="text-align:center; padding:25px; background:#1a2245; border-radius:14px;">
      <div style="font-size:1rem; color:#a0a8b8;">At 95% hit rate:</div>
      <div style="font-size:2.2rem; color:var(--cyan); font-weight:600; margin:12px 0;">107.5 ns</div>
      <div style="font-size:1rem; color:#8898b8;">0.95 Ã— 100 + 0.05 Ã— 250</div>
    </div>
    <div style="text-align:center; padding:25px; background:#1a2245; border-radius:14px;">
      <div style="font-size:1rem; color:#a0a8b8;">Overhead vs pure HBM:</div>
      <div style="font-size:2.2rem; color:var(--green); font-weight:600; margin:12px 0;">+7.5%</div>
      <div style="font-size:1rem; color:#8898b8;">(107.5 âˆ’ 100) / 100</div>
    </div>
  </div>
</div>

<!-- ============================================ -->
<h2>16. Final Results</h2>

<div class="diagram">
  <div class="diagram-label">Diagram 16.1 â€” System Comparison</div>
  
  <div class="compare">
    <div class="compare-side" style="background:rgba(255,107,107,0.08); border:2px solid var(--red);">
      <div class="compare-title" style="color:var(--red);">Without CXL</div>
      
      <div style="display:flex; flex-direction:column; gap:16px; margin-top:18px;">
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Memory</span>
          <span class="mono" style="font-size:1.05rem;">192 GB</span>
        </div>
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Users @ 128K</span>
          <span class="mono" style="font-size:1.05rem;">1</span>
        </div>
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Cost (8 users)</span>
          <span class="mono" style="font-size:1.05rem;">$70K</span>
        </div>
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Hardware</span>
          <span class="mono" style="font-size:1.05rem;">2Ã— B200</span>
        </div>
      </div>
    </div>
    
    <div class="compare-side" style="background:rgba(81,207,102,0.08); border:2px solid var(--green);">
      <div class="compare-title" style="color:var(--green);">With CXL + Tiering</div>
      
      <div style="display:flex; flex-direction:column; gap:16px; margin-top:18px;">
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Memory</span>
          <span class="mono" style="font-size:1.05rem; color:var(--green);">1.2 TB</span>
        </div>
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Users @ 128K</span>
          <span class="mono" style="font-size:1.05rem; color:var(--green);">8+</span>
        </div>
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Cost (8 users)</span>
          <span class="mono" style="font-size:1.05rem; color:var(--green);">$45K</span>
        </div>
        <div style="display:flex; justify-content:space-between;">
          <span style="font-size:1rem; color:#a0a8b8;">Hardware</span>
          <span class="mono" style="font-size:1.05rem;">1Ã— B200 + CXL</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="diagram">
  <div class="diagram-label">Diagram 16.2 â€” Key Metrics</div>
  
  <div class="stat-grid">
    <div class="stat-card">
      <div class="stat-value">6Ã—</div>
      <div class="stat-label">Memory Expansion</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">8Ã—</div>
      <div class="stat-label">User Capacity</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">36%</div>
      <div class="stat-label">Cost Reduction</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">7.5%</div>
      <div class="stat-label">Latency Overhead</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">95%</div>
      <div class="stat-label">HBM Hit Rate</div>
    </div>
    <div class="stat-card">
      <div class="stat-value">33</div>
      <div class="stat-label">Tokens/sec/user</div>
    </div>
  </div>
</div>

<!-- Footer -->
<div style="margin-top:100px; padding-top:35px; border-top:2px solid #3a4a6a; text-align:center; color:#6a7a9a; font-size:1rem;">
  Slug Architecture Research â€” December 2025
</div>

</body>
</html>